<!DOCTYPE html>
<html>

<head>
  
  <title>å¾®ä¿¡å°ç¨‹åºæ¬ç –è®°(ä¸€) | Abert</title>
  <meta name="google-site-verification" content="" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta itemprop="name" content="Abert" />
  <meta itemprop="description" content="" />
  <meta itemprop="image" content="" />
  <link rel="shortcut icon" href="" type="image/x-icon">
  <!-- keywords and description -->
  
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  
  
<link rel="stylesheet" href="/css/style.css">

  <script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <div id="container">
    <header>
  <div class="site-title">
    <a href="/">
      Abert
    </a>
  </div>
  
  
  <p class="links">
    
    <a target="_blank" rel="noopener" href="https://github.com/jeft224">
      <img src="/images/links/github.png" alt="github">
    </a>
    
  </p>
  
</header>
    <div id="main">
      <article class="post">
  <h3 class="date">
  <time datetime="2019-04-27T03:34:56.000Z">
    04-27,2019
  </time>
</h3>
  <h1>å¾®ä¿¡å°ç¨‹åºæ¬ç –è®°(ä¸€)</h1>
  <p class="post-info">
  
  
</p>
  
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">å¾®ä¿¡å°ç¨‹åº</a></li></ul>

  
  <article>
    <h3 id="å¾®ä¿¡å°ç¨‹åºé‡åˆ°çš„å‘â€”â€”ä¸¤ç§æ•ˆæœå®ç°"><a href="#å¾®ä¿¡å°ç¨‹åºé‡åˆ°çš„å‘â€”â€”ä¸¤ç§æ•ˆæœå®ç°" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºé‡åˆ°çš„å‘â€”â€”ä¸¤ç§æ•ˆæœå®ç°"></a>å¾®ä¿¡å°ç¨‹åºé‡åˆ°çš„å‘â€”â€”ä¸¤ç§æ•ˆæœå®ç°</h3><p>æ®è¯´æ²¡æœ‰ä¸€ä¸ªå°å§å§æ¥é•‡è¿™ç¯‡åšå®¢ï¼Œæˆ‘çš„æµè§ˆé‡æ˜¯ä¸Šä¸å»çš„ ğŸ˜‚ã€‚<br><img src="/images/wx-girl.jpg" alt="ç¨‹åºåª›å°å§å§"></p>
<h4 id="å¾®ä¿¡å°ç¨‹åºé¦–é¡µå¸é¡¶çš„æ•ˆæœå®ç°"><a href="#å¾®ä¿¡å°ç¨‹åºé¦–é¡µå¸é¡¶çš„æ•ˆæœå®ç°" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºé¦–é¡µå¸é¡¶çš„æ•ˆæœå®ç°"></a>å¾®ä¿¡å°ç¨‹åºé¦–é¡µå¸é¡¶çš„æ•ˆæœå®ç°</h4><p>åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŠŠè¯¥å‡†å¤‡çš„ä¸œè¥¿å…ˆå‡†å¤‡ä¸€æ³¢ï¼Œä¸ç„¶è€å¸æœºå¼€è½¦ä¹Ÿå¼€ä¸åŠ¨å‘€!ğŸšŒ</p>
<p>é¦–å…ˆéœ€è¦ wxml çš„æ”¯æŒ:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;recomend-title &#123;&#123; scrollStatus ? &#x27;recomend-fixed&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;recommend&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  &#123;&#123;item.jobTypeName&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å†è€…éœ€è¦ wxss çš„æ”¯æŒ:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.recomend-fixed</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡†å¤‡å¥½äº†ï¼Œå¼€å§‹é€šè¿‡<code>js</code>æ¥å®ç°æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚å¼€è½¦äº† ğŸšï¼Œå°ä¼™ä¼´ä»¬ï¼Œå¼€å§‹ä¸Šè½¦äº†ã€‚</p>
<h5 id="æ–¹æ³•-1-é€šè¿‡-scroll-view-æ¥å®ç°å¸é¡¶çš„æ•ˆæœ"><a href="#æ–¹æ³•-1-é€šè¿‡-scroll-view-æ¥å®ç°å¸é¡¶çš„æ•ˆæœ" class="headerlink" title="æ–¹æ³• 1 é€šè¿‡ scroll-view æ¥å®ç°å¸é¡¶çš„æ•ˆæœ"></a>æ–¹æ³• 1 é€šè¿‡ scroll-view æ¥å®ç°å¸é¡¶çš„æ•ˆæœ</h5><p>ä½¿ç”¨<code>scroll-view</code>ç»„ä»¶ï¼Œä¸Šé¢çš„ wxml çš„å†…å®¹éœ€è¦åŒ…è£¹åœ¨<code>&lt;scroll-view scroll-y style=&quot;height: 100%&quot; bindscroll=&quot;scroll&quot;&gt;&lt;/scroll-view&gt;</code>é‡Œé¢ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">scrollStatus</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fixTop</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">let</span> query = wx.<span class="title function_">createSelectorQuery</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å¸é¡¶å…ƒç´ ç¦»é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line">    query</span><br><span class="line">      .<span class="title function_">select</span>(<span class="string">&#x27;#recommend&#x27;</span>)</span><br><span class="line">      .<span class="title function_">boundingClientRect</span>(<span class="keyword">function</span>(<span class="params">rect</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ çš„topå¤ªå°,ä¸ºäº†å®ç°æ»šåŠ¨åˆ°é€‚åˆçš„ä½ç½®+280</span></span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">fixTop</span>: rect.<span class="property">top</span> + <span class="number">280</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">exec</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç›‘å¬æ»šåŠ¨å‡½æ•°</span></span><br><span class="line">  <span class="title function_">scroll</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> top = e.<span class="property">detail</span>.<span class="property">scrollTop</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">scrollStatus</span>: top &gt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">fixTop</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="æ–¹æ³•-2-é€šè¿‡-onPageScroll-æ¥å®ç°å¸é¡¶çš„æ•ˆæœ"><a href="#æ–¹æ³•-2-é€šè¿‡-onPageScroll-æ¥å®ç°å¸é¡¶çš„æ•ˆæœ" class="headerlink" title="æ–¹æ³• 2 é€šè¿‡ onPageScroll æ¥å®ç°å¸é¡¶çš„æ•ˆæœ"></a>æ–¹æ³• 2 é€šè¿‡ onPageScroll æ¥å®ç°å¸é¡¶çš„æ•ˆæœ</h5><p>å¦‚æœä¸ä½¿ç”¨<code>scroll-view</code>ï¼Œåˆ©ç”¨é¡µé¢çš„<code>onPageScroll</code>æ–¹æ³•ï¼Œä½†æ˜¯ä½ åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼š</p>
<p>1.åœ¨ page æ ‡ç­¾çš„æ ·å¼ä¼šæºå¸¦ä¸€ä¸ªæ ·å¼<code>overflow-yï¼šhidden</code>ï¼Œå¯¼è‡´ä½ é¡µé¢æ»šåŠ¨ä¸äº†ï¼Œä¸èƒ½è§¦å‘<code>onPageScroll</code>æ–¹æ³• 2.åœ¨ page æ ‡ç­¾å’ŒåŒ…å«ä¸Šé¢çš„ wxml çš„çˆ¶æ ‡ç­¾é‡Œé¢ä¸èƒ½åŒæ—¶ä½¿ç”¨<code>height:100%</code>.</p>
<p><code>JS</code>å®ç°éƒ¨åˆ†:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">scrollStatus</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fixTop</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">let</span> query = wx.<span class="title function_">createSelectorQuery</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å¸é¡¶å…ƒç´ ç¦»é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line">    query</span><br><span class="line">      .<span class="title function_">select</span>(<span class="string">&#x27;#recommend&#x27;</span>)</span><br><span class="line">      .<span class="title function_">boundingClientRect</span>(<span class="keyword">function</span>(<span class="params">rect</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ çš„topå¤ªå°,ä¸ºäº†å®ç°æ»šåŠ¨åˆ°é€‚åˆçš„ä½ç½®+280</span></span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">fixTop</span>: rect.<span class="property">top</span> + <span class="number">280</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">exec</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç›‘å¬æ»šåŠ¨å‡½æ•°</span></span><br><span class="line">  <span class="attr">onPageScroll</span>: <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> top = e.<span class="property">scrollTop</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">scrollStatus</span>: top &gt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">fixTop</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="æ–¹æ³•-3-é€šè¿‡-position-sticky-æ¥å®ç°å¸é¡¶çš„æ•ˆæœï¼ˆåç»­è¡¥å……ï¼‰"><a href="#æ–¹æ³•-3-é€šè¿‡-position-sticky-æ¥å®ç°å¸é¡¶çš„æ•ˆæœï¼ˆåç»­è¡¥å……ï¼‰" class="headerlink" title="æ–¹æ³• 3 é€šè¿‡ position:sticky æ¥å®ç°å¸é¡¶çš„æ•ˆæœï¼ˆåç»­è¡¥å……ï¼‰"></a>æ–¹æ³• 3 é€šè¿‡ position:sticky æ¥å®ç°å¸é¡¶çš„æ•ˆæœï¼ˆåç»­è¡¥å……ï¼‰</h5><p>åœ¨ CSS3 ä¸­æœ‰ä¸€ä¸ªå±æ€§å¯ä»¥ç®€å•çš„å®ç°å¸é¡¶çš„æ•ˆæœï¼Œå®ç°çš„ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sticky</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: sticky;</span><br><span class="line">  <span class="attribute">position</span>: -webkit-sticky;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**æ³¨æ„:**è¯¥æ–¹æ³•åœ¨å¾®ä¿¡å°ç¨‹åºçš„åº”ç”¨æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œå¼€å§‹å¸é¡¶åæ»šåŠ¨ç€å°±ä¸è§äº†</p>
<h4 id="å¾®ä¿¡å°å¾®ä¿¡å¤´éƒ¨æ»‘åŠ¨åˆ‡æ¢æ•ˆæœå®ç°"><a href="#å¾®ä¿¡å°å¾®ä¿¡å¤´éƒ¨æ»‘åŠ¨åˆ‡æ¢æ•ˆæœå®ç°" class="headerlink" title="å¾®ä¿¡å°å¾®ä¿¡å¤´éƒ¨æ»‘åŠ¨åˆ‡æ¢æ•ˆæœå®ç°"></a>å¾®ä¿¡å°å¾®ä¿¡å¤´éƒ¨æ»‘åŠ¨åˆ‡æ¢æ•ˆæœå®ç°</h4><h5 id="æ–¹æ³•-1-é€šè¿‡è®¾ç½®å›ºå®šçš„æ»‘åŠ¨è·ç¦»æ¥å®ç°ç‚¹å‡»æ»‘åŠ¨"><a href="#æ–¹æ³•-1-é€šè¿‡è®¾ç½®å›ºå®šçš„æ»‘åŠ¨è·ç¦»æ¥å®ç°ç‚¹å‡»æ»‘åŠ¨" class="headerlink" title="æ–¹æ³• 1 é€šè¿‡è®¾ç½®å›ºå®šçš„æ»‘åŠ¨è·ç¦»æ¥å®ç°ç‚¹å‡»æ»‘åŠ¨"></a>æ–¹æ³• 1 é€šè¿‡è®¾ç½®å›ºå®šçš„æ»‘åŠ¨è·ç¦»æ¥å®ç°ç‚¹å‡»æ»‘åŠ¨</h5><p>å¤´éƒ¨ tab é¡µæœ‰å¾ˆå¤šæ ‡ç­¾é€šè¿‡ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªè¿›è¡Œæ»‘åŠ¨å¯¹åº”çš„æ ‡ç­¾ã€‚</p>
<p>æ‰€éœ€çš„<code>wxml</code>çš„å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-with-animation</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-left</span>=<span class="string">&quot;&#123;&#123;scrollX&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; topicList &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:key</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bind:tap</span>=<span class="string">&quot;directTopicPage&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;&#123;&#123;topicid === item.id?&#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>&#123;&#123; item.title &#125;&#125;&lt;/text</span><br><span class="line">  &gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰€éœ€çš„<code>wxss</code>çš„å†…å®¹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#34b9b4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€é‡è¦çš„<code>JS</code>éƒ¨åˆ†:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// é‡Œé¢åŒ…å«çš„æ•°æ®ï¼Œè¯·è‡ªè¡Œå¡«å……</span></span><br><span class="line">    <span class="attr">topicList</span>: [],</span><br><span class="line">    <span class="attr">scrollX</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">directTopicPage</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> index = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>;</span><br><span class="line">    <span class="comment">// é€šè¿‡çº¦å®šä¸€æ ‡ç­¾çš„å®½åº¦æ¥è®¾ç½®æ»‘åŠ¨æ´»åŠ¨çš„è·ç¦»ï¼ŒåŒæ—¶å¯ä»¥åœ¨å¯è§†åŒ–ç•Œé¢çœ‹åˆ°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">scrollX</span>: ~~(index - <span class="number">1</span>) * <span class="number">60</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="æ–¹æ³•-2-é€šè¿‡è·å–ç‚¹å‡»å…ƒç´ è·ç¦»å·¦è¾¹çš„è·ç¦»è·Ÿå±å¹•å®½åº¦çš„ä¸€åŠæ¥å®ç°ç‚¹å‡»å±…ä¸­-åç»­è¡¥å……"><a href="#æ–¹æ³•-2-é€šè¿‡è·å–ç‚¹å‡»å…ƒç´ è·ç¦»å·¦è¾¹çš„è·ç¦»è·Ÿå±å¹•å®½åº¦çš„ä¸€åŠæ¥å®ç°ç‚¹å‡»å±…ä¸­-åç»­è¡¥å……" class="headerlink" title="æ–¹æ³• 2 é€šè¿‡è·å–ç‚¹å‡»å…ƒç´ è·ç¦»å·¦è¾¹çš„è·ç¦»è·Ÿå±å¹•å®½åº¦çš„ä¸€åŠæ¥å®ç°ç‚¹å‡»å±…ä¸­(åç»­è¡¥å……)"></a>æ–¹æ³• 2 é€šè¿‡è·å–ç‚¹å‡»å…ƒç´ è·ç¦»å·¦è¾¹çš„è·ç¦»è·Ÿå±å¹•å®½åº¦çš„ä¸€åŠæ¥å®ç°ç‚¹å‡»å±…ä¸­(åç»­è¡¥å……)</h5><p>å®ç°çš„æ€æƒ³:</p>
<ul>
<li>è·å–å±å¹•å®½åº¦çš„ä¸€åŠ</li>
<li>è·å–ç‚¹å‡»å…ƒç´ è·ç¦»å±å¹•å·¦è¾¹çš„è·ç¦»</li>
<li>è·å–ç‚¹å‡»å…ƒç´ çš„å®½åº¦ä¸€åŠ</li>
<li>è·å–å·²ç»æ»šåŠ¨çš„è·ç¦»</li>
<li>è®¡ç®—è·ç¦»çš„å˜åŒ–:ç‚¹å‡»å…ƒç´ ä¸å±å¹•å·¦è¾¹çš„è·ç¦»-å±å¹•çš„ä¸€åŠ+ç‚¹å‡»å…ƒç´ å®½åº¦çš„ä¸€åŠ</li>
<li>è®¡ç®—æœ€ç»ˆéœ€è¦æ»šåŠ¨çš„è·ç¦»:åŸå…ˆæ»šåŠ¨è·ç¦»+å˜åŒ–è·ç¦»</li>
</ul>
<p>æ‰€éœ€çš„<code>wxml</code>çš„å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-with-animation</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-left</span>=<span class="string">&quot;&#123;&#123;scrollX&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindscroll</span>=<span class="string">&quot;scrollMove&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;topicList&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:key</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;topic&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;directTopicPage&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;&#123;&#123;current === index ? &#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>&#123;&#123; item.type || item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰€éœ€çš„<code>wxss</code>çš„å†…å®¹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.single-line</span> <span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="comment">/* è¿™ä¸¤ä¸ªä¸€å®šå­˜åœ¨ ä¸ç„¶å®ç°ä¸äº†ç‚¹å‡»è‡ªåŠ¨å±…ä¸­ */</span></span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€é‡è¦çš„<code>JS</code>éƒ¨åˆ†:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">showAll</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">scrollLeft</span>: <span class="number">0</span>, <span class="comment">// scroll-viewæ»šåŠ¨çš„è·ç¦»,é»˜è®¤ä¸º0,å› ä¸ºæ²¡æœ‰è§¦å‘æ»šåŠ¨</span></span><br><span class="line">  <span class="attr">slideWidth</span>:<span class="number">60</span>,</span><br><span class="line">  <span class="comment">// ? subLeft ç‚¹å‡»å…ƒç´ è·ç¦»å±å¹•å·¦è¾¹çš„è·ç¦»</span></span><br><span class="line">  <span class="comment">// ? subHalfWidth ç‚¹å‡»å…ƒç´ çš„å®½åº¦ä¸€åŠ</span></span><br><span class="line">  <span class="comment">// ? screenHalfWidth  å±å¹•å®½åº¦çš„ä¸€åŠ</span></span><br><span class="line">  <span class="attr">moveParams</span>: &#123;</span><br><span class="line">    subLeft <span class="comment">// ç‚¹å‡»å…ƒç´ è·ç¦»å±å¹•å·¦è¾¹çš„è·ç¦»</span></span><br><span class="line">    subHalfWidth <span class="comment">// ç‚¹å‡»å…ƒç´ çš„å®½åº¦ä¸€åŠ</span></span><br><span class="line">    screenHalfWidth  <span class="comment">// å±å¹•å®½åº¦çš„ä¸€åŠ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">ready</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="comment">// è·å–æ‰‹æœºå±å¹•ä¿¡æ¯ï¼ˆå®½åº¦ï¼‰</span></span><br><span class="line">  wx.<span class="title function_">getSystemInfo</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        that.<span class="property">data</span>.<span class="property">moveParams</span>.<span class="property">screenHalfWidth</span> = res.<span class="property">screenWidth</span> / <span class="number">2</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">    <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">//è·å–ç‚¹å‡»å…ƒç´ çš„ä¿¡æ¯,eleä¸ºä¼ å…¥çš„id</span></span><br><span class="line">    <span class="title function_">getRect</span>(<span class="params">ele,index,currentItem</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">      <span class="comment">// è·å–eleçš„domå…ƒç´ ï¼ŒåŒæ—¶è·å–DOMå…ƒç´ ä¸€äº›åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">      <span class="keyword">const</span> query = wx.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>);</span><br><span class="line">      query.<span class="title function_">select</span>(ele).<span class="title function_">boundingClientRect</span>(<span class="keyword">function</span> (<span class="params">rect</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> moveParams = that.<span class="property">data</span>.<span class="property">moveParams</span>;</span><br><span class="line">        moveParams.<span class="property">subLeft</span> = rect.<span class="property">left</span>;</span><br><span class="line">        moveParams.<span class="property">subHalfWidth</span> = rect.<span class="property">width</span>/<span class="number">2</span>;</span><br><span class="line">        that.<span class="title function_">moveTo</span>(index,currentItem);</span><br><span class="line">      &#125;).<span class="title function_">exec</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°é€‰ä¸­çš„é¡¹å±…ä¸­</span></span><br><span class="line">    <span class="title function_">moveTo</span>(<span class="params">index,currentItem</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;moveParams,scrollLeft&#125; = <span class="variable language_">this</span>.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> &#123;subLeft,screenHalfWidth,subHalfWidth&#125; = moveParams;</span><br><span class="line">      <span class="comment">// ç”¨äºè®¡ç®—DOMå…ƒç´ è·ç¦»å±å¹•ä¸€åŠçš„è·ç¦»</span></span><br><span class="line">      <span class="keyword">let</span> distance = subLeft - screenHalfWidth + subHalfWidth;</span><br><span class="line">      <span class="comment">// ç”¨äºè®¡ç®—æ»‘åŠ¨çš„è·ç¦»</span></span><br><span class="line">      scrollLeft = scrollLeft + distance;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">scrollLeft</span>: scrollLeft</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// ç”¨äºçˆ¶å­ç»„ä»¶çš„é€šä¿¡</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;doSetting&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">current</span>: index,</span><br><span class="line">        <span class="attr">id</span>: currentItem.<span class="property">id</span>,</span><br><span class="line">        <span class="title class_">ScrollX</span>: scrollLeft</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¡ç®—æ²¡ç‚¹å‡»DOMå…ƒç´ æ»‘åŠ¨çš„è·ç¦»</span></span><br><span class="line">    <span class="title function_">scrollMove</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> moveParams = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">moveParams</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">scrollLeft</span>: e.<span class="property">detail</span>.<span class="property">scrollLeft</span>,</span><br><span class="line">        <span class="attr">moveParams</span>: moveParams</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç‚¹å‡»DOMå…ƒç´ å®ç°DOMå…ƒç´ å±…ä¸­</span></span><br><span class="line">    <span class="title function_">directTopicPage</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> index = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>;</span><br><span class="line">      <span class="keyword">let</span> currentItem = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">topicList</span>[index];</span><br><span class="line">      <span class="keyword">let</span> ele = <span class="string">`#topic<span class="subst">$&#123;index&#125;</span>`</span>;</span><br><span class="line">      <span class="keyword">let</span> type = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> (type) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">showAllTopic</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getRect</span>(ele,index,currentItem);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é€šè¿‡ä¸Šè¿°æ–¹æ³•å®ç°çš„å¸é¡¶å’Œ tab åˆ—è¡¨æ¨ªå‘æ»‘åŠ¨æ•ˆæœï¼Œå¸é¡¶æ•ˆæœåœ¨ ios ä¸Šæ—¶æ¯”è¾ƒæµç•…ï¼Œandroid ä¸Šæ»‘åŠ¨æ…¢ä¸€ç‚¹è¿˜ç®—æµç•…ï¼Œä½†æ˜¯å¿«ä¸€ç‚¹å°±å¡é¡¿ï¼›tab åˆ—è¡¨æ¨ªå‘æ»‘åŠ¨æ•ˆæœè¡¥å……äº†ä¸€ç§ç‚¹å‡»è‡ªåŠ¨å±…ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„æ–¹æ³•æ¨èï¼Œè¯·æœ›å„ä½èµæ•™ã€‚</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CODING_1/article/details/84571514">å¾®ä¿¡å°ç¨‹åºç‚¹å‡»å…ƒç´ å±…ä¸­</a></p>

  </article>
  
  <hr>
  <blockquote>
    <p>
      æœ¬æ–‡ç”± <a href="">Abert</a> åˆ›ä½œï¼Œé‡‡ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/">çŸ¥è¯†å…±äº«ç½²å 4.0</a> å›½é™…è®¸å¯åè®®ã€‚
    </p>
    <p>
      æœ¬ç«™æ–‡ç« é™¤æ³¨æ˜è½¬è½½/å‡ºå¤„å¤–ï¼Œå‡ä¸ºæœ¬ç«™åŸåˆ›æˆ–ç¿»è¯‘ï¼Œè½¬è½½è¯·åŠ¡å¿…ç½²åã€‚
    </p>
  </blockquote>
  
</article>


    </div>
  </div>
  <footer>
  
  
  <!-- <p>
    Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/syy11cn/hexo-theme-linear">Linear</a> from <a target="_blank" rel="noopener" href="https://syy11.cn">Yiyang Sun</a>
  </p> -->
</footer>
  
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <script>
    Waline({
      el: '#waline',
      placeholder: '',
      avatar: 'retro',
      visitor: true,
      requiredFields: ['nick', 'mail'],
      serverURL: '',
      emoji: [
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/alus',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba',
      ]
    });
  </script>
</body>

</html>